# <img src="PriconneReTLInstaller/Resources/Item_Jewel_Art.ico"> PriconneReTL Installer
An installer/updater GUI for the [PriconneRe-TL](https://github.com/ImaterialC/PriconneRe-TL) english patch.  
Make installing, updating and removing the unofficial english patch for Princess Connect Re:Dive japanese version easier.

Based on [PriconneTL_Updater](https://github.com/touanu/PriconeTL_Updater) by [touanu](https://github.com/touanu)

## You can get the latest release here:  
https://github.com/tynave/PriconneReTL-Installer/releases/latest

## <img src="PriconneReTLInstaller/Resources/Item_Jewel_Art.ico"> Features
- Graphical user interface for easy operation.
- Able to detect game path, installed version and latest available version.
- Multiple operations depending on already installed version and user options, including install/reinstall/uninstall.
- Able to delete the interop assemblies generated by the translation patch. Useful when an aborted / incorrect game start-up causes the interop assemblies get corrupted or incorrectly generated.
- Is able to detect user-important files and keeps them intact during processing, including:
  - XUnityAutoTranslator specific files (from here on referred as "ignored files")
  - Configuration files
  - User **created** files in the patch folders  
(Please note that due to the logic of the operations, any **user edited** files that originally are part of the translation patch **DO NOT** persist.
    So if you would like to make personal alterations of the patch files and want to keep those across the versions, it is advised to have those on seperate files.)
- New in 1.3.0: New interface to modify list of ignored files. Useful for users who would like to modify files that are part of the translation patch and want to keep them safe from updates or uninstallation.
- New in 1.3.0: New interface to install/update/uninstall [PriconneReTL-AutoUpdater](https://github.com/tynave/PriconneReTL-AutoUpdater) and [PriconneReTL-AutoUpdaterApp](https://github.com/tynave/PriconneReTL-AutoUpdaterApp)

## <img src="PriconneReTLInstaller/Resources/Item_Jewel_Art.ico"> Installation
The application is portable, does not require installation, just extract the released .zip archive anywhere.  
All the operations processed are always logged into the *ReTLInstaller.log* file, which resides in the application's folder.  
If the file is not present, it gets created. If the file is already present, it's content is purges/reset on every run.

## <img src="PriconneReTLInstaller/Resources/Item_Jewel_Art.ico"> Operations  

### The application is capable of the following operations:  

### <img src="PriconneReTLInstaller/Resources/check_checked_24x24_2.png"> Install:
If you have never used the translation patch before, or you don't have it currently installed, select the *Install* operation press the *Start!* button, and the application will download and install it for you.  
If you have files left over from a previous installation, the application will keep those.

### <img src="PriconneReTLInstaller/Resources/check_checked_24x24_2.png"> Update:
If you already have a version of the translation patch applied, select *Update* and press the *Start!* button, and the application will update it by deleting the files of the current patch version, and downloading the latest files.  
Config files/ignored files/user files as well as interop aseemblies are not touched during the process.

Note: Install and Update operation share the same checkbox, the option changes depending on if you have the patch installed or not.

### <img src="PriconneReTLInstaller/Resources/check_checked_24x24_2.png"> Reinstall:
If you check the *Reinstall* operation before pressing the *Start* button, the application will delete the currently installed translation patch version, and download and install the latest release.  
It's like an Uninstall + Install.   
Depending on selected options, it will either keep or delete config files, ignored files and/or the interop assemblies.  
Does not touch user files.

### <img src="PriconneReTLInstaller/Resources/check_checked_24x24_2.png"> Uninstall:
If you check the *Uninstall* operation before pressing the Start button, the application will remove the currently installed translation patch.
Depending on selected options, it will either keep or delete config files, ignored files and/or the interop assemblies.  
For a full uninstall, select all options.  
Please note, that even a full uninstall does NOT remove any files created by the user in the patch directories.

_**Update and Reinstall do the same thing, why having both of them then..?**_  
When starting to develop the application, Update and Reinstall operations followed different logics.  
However, during the development, it turned out, that the github API has certain limitations, which would have made the Update logic have issues if the user skips a few versions of the translation patch and wants to do a bigger update.  
So in order to avoid this, the Update logic needed to be changed to the approach that actually matches that of the Reinstall process.  
The two main differences however remain:
 - Update never touches the user important files (config/ignored/interops/user created files) while for Reinstall, you can select to have some of these removed / replaced by the ones present in the translation patch files.
 - Update cannot be performed when you already have the latest translation patch release installed, while Reinstall, as the name implies allows you to even reinstall the latest version.

### <img src="PriconneReTLInstaller/Resources/check_checked_24x24_2.png"> Launch Game:
By selection this option, the installer launches the game. You can select this option either together with any install/update/uninstall/reinstall option, or just by itself.  

If you select this option, a dropdown menu will become visible, and you have the option to select either the default DMM Game Player launcher, or the [DMMGamePlayerFastLauncher](https://github.com/fa0311/DMMGamePlayerFastLauncher).  
The installer detects if you have the DMMGamePlayerFastLauncher installed, and defaults to it if possible, but you can change it anytime.  

If you have the Launch Game option selected, the installer will close itself 5 seconds after the game launch has been initiated.

The Launch Game option is a user setting, meaning the state of the option is saved even when you close the application.  

If you have issues with the launch option, like the game not launching, try running the PriconneReTL-Installer in administrator mode.

You can also see a brief explanation of the currently selected operation if you hover over the <img src="PriconneReTLInstaller/Resources/q_bubble.png" height="25"> bubble icon beside the current operation's name.

## <img src="PriconneReTLInstaller/Resources/Item_Jewel_Art.ico"> Options
### <img src="PriconneReTLInstaller/Resources/check_checked_24x24_2.png"> Remove Config Files  
Removes the following config files also (if present) located in `BepInEx\config`:
- AutoTranslatorConfig.ini
- BepInEx.cfg

### <img src="PriconneReTLInstaller/Resources/check_checked_24x24_2.png"> Remove Ignored Patch Files
Removes the files that are listed in the ignored files list.   
These are by default (if present) the following files located in `BepInEx\Translation\en\Text`:
- _AutoGeneratedTranslations.txt
- _Preprocessors.txt
- _Postprocessors.txt
- _Substitions.txt

To check the list of files either open the <img src="PriconneReTLInstaller/Resources/scroll_closed_res2.png" height="25">Edit Ignored Files interface, or refer to the tooltip of this checkbox.

### <img src="PriconneReTLInstaller/Resources/check_checked_24x24_2.png"> Remove Interops
Removes the interop assemblies generated by the translation patch. These are located in `%appdata%\BepInEx`  
These take up around ~250MB, normally you don't need to worry about them, but this option might be useful if you accidentally close the game during the assembly generation, and the corrupted assemblies prevent your game from starting up.

### <img src="PriconneReTLInstaller/Resources/check_checked_24x24_2.png"> Show Logs
By checking / unchecking the *Show Logs* option, you can view/hide a detailed progress/output log. Please note that logging to file always happens regardless of this option.  

## <img src="PriconneReTLInstaller/Resources/Item_Jewel_Art.ico"> Menu
### <img src="PriconneReTLInstaller/Resources/scroll_closed_res2.png" height="25"> Edit Ignored Files
Opens the interface to edit the list of files ignored by the updater during installation/update/uninstallation operations.

### <img src="PriconneReTLInstaller/Resources/crystal_normal_res.png" height="25"> AutoUpdater Installer  
Opens the interface for installing/updating/uninstalling the AutoUpdater

### <img src="PriconneReTLInstaller/Resources/i_bubble.png" height="25"> Help / About
Display version number and open this Readme page.

### <img src="PriconneReTLInstaller/Resources/arrow_blue.png" height="25"> Minimize Application
Minimizes the application to the tray.

### <img src="PriconneReTLInstaller/Resources/door_closed.png" height="25"> Exit Application  
Closes the application.


## <img src="PriconneReTLInstaller/Resources/scroll_closed_res2.png" height="30"> Edit Ignored Files menu
You can use this interface to edit the list of files that are ignored by the updater during an install/update/uninstall/reinstall operation.  
This means these files never get overwritten or deleted when performing any of the above operations.

**NOTE: editing the list of ignored files only applies to manual operations performed via this application!  
The AutoUpdater plugin and app still operates with the default ignore list!**

The listbox on the interface contains the files currently on the list. Paths are relative to the Princess Connect Re:Dive game folder.

### <img src="PriconneReTLInstaller/Resources/add_button.png" height="30"> Add File
Use this button to add a file to the list. Only files in the game folder can be added.

### <img src="PriconneReTLInstaller/Resources/remove_button.png" height="30"> Remove Selected
Removes the currently selected file from the list.

### <img src="PriconneReTLInstaller/Resources/save_button.png" height="30"> Save Changes
Finalizes changes made to the list. Exiting the interface without saving cancels any changes made to the list to that point.

### <img src="PriconneReTLInstaller/Resources/defaults_button.png" height="30"> Restore Defaults
Restored the default values to the list.  
WARNING! After restoration, the list needs to be saved to finalize the defaulting.


## <img src="PriconneReTLInstaller/Resources/crystal_normal_res.png" height="30"> AutoUpdater Installer menu
Use this interface to install/update/uninstall [PriconneReTL-AutoUpdater](https://github.com/tynave/PriconneReTL-AutoUpdater) and [PriconneReTL-AutoUpdaterApp](https://github.com/tynave/PriconneReTL-AutoUpdaterApp)
Please refer to the Readme files on the respective repos for details on the plugin and the app.

### <img src="PriconneReTLInstaller/Resources/install_button2.png" height="30"> Install / Update AutoUpdater
Installs the plugin and app or updates them to the latest version.

### <img src="PriconneReTLInstaller/Resources/uninstall_button.png" height="30"> Uninstall AutoUpdater
Removes the plugin and the app.

The AutoUpdater plugin and app are installed to the `BepInEx\patchers\PriconneReTLAutoUpdater` folders.  
If you happened to have installed them manually into a different path / folder name, they won't be recognized by the installer.

## <img src="PriconneReTLInstaller/Resources/Item_Jewel_Art.ico"> Requirements
- .NET 4.7.2 (should already be installed if you're running Windows 10 Version 1803 or above)

## <img src="PriconneReTLInstaller/Resources/Item_Jewel_Art.ico"> Possible future features
- Maybe more settings / user configurable options.

## <img src="PriconneReTLInstaller/Resources/Item_Jewel_Art.ico"> Disclaimer
Use at your own risk.  
Although the application has been thoroughly tested, bugs, errors or undesired operation may happen.  
The author takes no responsibility for any eventual damage, data loss or any other negative effect cause by the above listed occurences or any misuse of the application.
