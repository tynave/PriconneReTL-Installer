# PriconneReTL Installer
An installer/updater GUI for the [PriconneRe-TL](https://github.com/ImaterialC/PriconneRe-TL) english patch.  
Make installing, updating and removing the unofficial english patch for Princess Connect Re:Dive japanese version easier.

Based on [PriconneTL_Updater](https://github.com/touanu/PriconeTL_Updater) by [touanu](https://github.com/touanu)

## Features
- Graphical user interface for easy operation.
- Able to detect game path, installed version and latest available version.
- Multiple operations depending on already installed version and user options, including install/reinstall/uninstall.
- Able to delete the interop assemblies generated by the translation patch. Useful when an aborted / incorrect game start-up causes the interop assemblies get corrupted or incorrectly generated.
- Is able to detect user-important files and keeps them intact during processing, including:
  - XUnityAutoTranslator specific files (from here on referred as "ignored files")
  - Configuration files
  - User **created** files in the patch folders  
(Please note that due to the logic of the operations, any **user edited** files that originally are part of the translation patch **DO NOT** persist.
    So if you would like to make personal alterations of the patch files and want to keep those across the versions, it is advised to have those on seperate files.)
- New in 1.3.0: New interface to modify list of ignored files. Useful for users who would like to modify files that are part of the translation patch and want to keep them safe from updates or uninstallation.
- New in 1.3.0: New interface to install/update/uninstall [PriconneReTL-AutoUpdater](https://github.com/tynave/PriconneReTL-AutoUpdater) and [PriconneReTL-AutoUpdaterApp](https://github.com/tynave/PriconneReTL-AutoUpdaterApp)

## Installation
The application is portable, does not require installation, just extract the released .zip archive anywhere.  
All the operations processed are always logged into the *ReTLInstaller.log* file, which resides in the application's folder.  
If the file is not present, it gets created. If the file is already present, it's content is purges/reset on every run.

## Operations  

### The application is capable of the following operations:  

### Install:
If you have never used the translation patch before, or you don't have it currently installed, select the *Install* operation press the *Start!* button, and the application will download and install it for you.  
If you have files left over from a previous installation, the application will keep those.

### Update:
If you already have a version of the translation patch applied, select *Update* and press the *Start!* button, and the application will update it by deleting the files of the current patch version, and downloading the latest files.  
Config files/ignored files/user files as well as interop aseemblies are not touched during the process.

Note: Install and Update operation share the same checkbox, the option changes depending on if you have the patch installed or not.

### Reinstall:
If you check the *Reinstall* operation before pressing the *Start* button, the application will delete the currently installed translation patch version, and download and install the latest release.  
It's like an Uninstall + Install.   
Depending on selected options, it will either keep or delete config files, ignored files and/or the interop assemblies.  
Does not touch user files.

### Uninstall:
If you check the *Uninstall* operation before pressing the Start button, the application will remove the currently installed translation patch.
Depending on selected options, it will either keep or delete config files, ignored files and/or the interop assemblies.  
For a full uninstall, select all options.  
Please note, that even a full uninstall does NOT remove any files created by the user in the patch directories.

### Launch Game:
By selection this option, the installer launches the game. You can select this option either together with any install/update/uninstall/reinstall option, or just by itself.  
If you select this option, a dropdown menu will become visible, and you have the option to select either the default DMM Game Player launcher, or the [DMMGamePlayerFastLauncher](https://github.com/fa0311/DMMGamePlayerFastLauncher).  
The installer detects if you have the DMMGamePlayerFastLauncher installed, and defaults to that if it is, but you can change it anytime.  
If you have the Launch Game option selected, the installer will close itself 5 seconds after the game launch has been initiated.
The Launch Game option is a user setting, meaning the state of the option is saved even when you close the application.

_**Update and Reinstall do the same thing, why having both of them then..?**_  
When starting to develop the application, Update and Reinstall operations followed different logics.  
However, during the development, it turned out, that the github API has certain limitations, which would have made the Update logic have issues if the user skips a few versions of the translation patch and wants to do a bigger update.  
So in order to avoid this, the Update logic needed to be changed to the approach that actually matches that of the Reinstall process.  
The two main differences however remain:
 - Update never touches the user important files (config/ignored/interops/user created files) while for Reinstall, you can select to have some of these removed / replaced by the ones present in the translation patch files.
 - Update cannot be performed when you already have the latest translation patch release installed, while Reinstall, as the name implies allows you to even reinstall the latest version.

You can also see a brief explanation of the currently selected operation if you hover over the ? bubble icon beside the current operation's name.

## Options
### Remove Config Files  
Removes the following config files also (if present) located in `BepInEx\config`:
- AutoTranslatorConfig.ini
- BepInEx.cfg

### Remove Ignored Patch Files
Removes the following ignored patch files also (if present) loacated in `BepInEx\Translation\en\Text`:
- _AutoGeneratedTranslations.txt
- _Preprocessors.txt
- _Postprocessors.txt
- _Substitions.txt

### Remove Interops
Removes the interop assemblies generated by the translation patch. These are located in `%appdata%\BepInEx`  
These take up around ~250MB, normally you don't need to worry about them, but this option might be useful if you accidentally close the game during the assembly generation, and the corrupted assemblies prevent your game from starting up.

### Show Logs
By checking / unchecking the *Show Logs* option, you can view/hide a detailed progress/output log. Please note that logging to file always happens regardless of this option.  

## Menu
### Edit Ignored Files ![EditIgnoreFilesIcon](PriconneReTLInstaller/Resources/scroll_closed_res2.png|width=10)
Opens the interface to edit the list of files ignored by the updater during installation/update/uninstallation operations.

### AutoUpdater Installer  
Opens the interface for installing/updating/uninstalling the AutoUpdater

### Help / About
Display version number and open this Readme page.

### Minimize Application
Minimizes the application to the tray.

### Exit Application  
Closes the application.

## Requirements
- .NET 4.7.2 (should already be installed if you're running Windows 10 Version 1803 or above)

## Possible future features
- User configurable options (set log file path, add files to the ignored files, etc..)
- Verify option to check the files of the current installation without actual modifications
- Possibility to install the autoupdater from the installer

## Disclaimer
Use at your own risk.  
Although the application has been thoroughly tested, bugs, errors or undesired operation may happen.  
The author takes no responsibility for any eventual damage, data loss or any other negative effect cause by the above listed occurences or any misuse of the application.
